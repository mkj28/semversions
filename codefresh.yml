version: '1.0'
steps:
  build:
    title: Build Docker Image
    type: build
    image_name: mkj28/semversions
    working_directory: ./
    dockerfile: Dockerfile

  git_commit:
    image: sagan/generate-commit-tags:v0.0.2
    title: Tag git
    working_directory: ${{main_clone}}
    when:
      branch:
        only:
          - master

  semver:
    image: ${{build}}
    title: Setting Semversions
    working_directory: ${{main_clone}}
    when:
      branch:
        only:
          - master

  debug:
    image: alpine:3.8
    title: Print version
    commands:
      - echo $COMMIT_VERSION
